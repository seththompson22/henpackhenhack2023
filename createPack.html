<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="styles/createPack.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">


	<title>Create Your Hen Pack</title>
</head>
<body>
	<h1>Create Your Hen Pack</h1>
    <div class="container-group">
        <div id="container">
            <label for="group-name">Group Name:</label>
            <input type="text" id="group-name" name="group-name">
            <button type="button" onclick="createGroup()">Create Pack</button>
        </div>
        <div id="containerB">
            <label for="email">Enter email:</label>
            <input type="email" id="email" name="email">
            <button type="button" onclick="addEmail()">Add Email</button>
        </div>
    </div>
    <div id="buttonContainer">
        <button type="button" onclick="directGroup()">Find your Times!</button>
    </div>

	<script>
		// Define an array to store the emails
		var emails = [];

		// Function to add an email to the array
		function addEmail() {
			var email = document.getElementById("email").value;
			if (validateEmail(email)) {
                if (!emails.includes(email)){
				    emails.push(email);
				    document.getElementById("email").value = "";
				    updateGroup();
                }
                else {
                    alert("Email already Entered")
                }
			} else {
				alert("Please enter a valid email address.");
			}
		}

		// Function to create the group
		function createGroup() {
			var groupName = document.getElementById("group-name").value;
			if (groupName === "") {
				alert("Please enter a group name.");
			} else if (emails.length === 0) {
				alert("Please add at least one email to the group.");
			} else {
				var groupList = document.createElement("ul");
				for (var i = 0; i < emails.length; i++) {
					var emailListItem = document.createElement("li");
					emailListItem.textContent = emails[i];
					groupList.appendChild(emailListItem);
				}
				document.getElementById("group").innerHTML = "";
				document.getElementById("group").appendChild(groupList);
				alert("Group \"" + groupName + "\" created with " + emails.length + " members.");
			}
		}

		// Function to validate an email address
		function validateEmail(email) {
			var regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			return regex.test(email);
		}

		// Function to update the group display
        function updateGroup() {
            var groupList = document.createElement("ul");
            var uniqueEmails = [];
            for (var i = 0; i < emails.length; i++) {
                if (!uniqueEmails.includes(emails[i])) {
                    uniqueEmails.push(emails[i]);
                    var emailListItem = document.createElement("li");
                    emailListItem.textContent = emails[i];
                    groupList.appendChild(emailListItem);
                }
            }
            var emailContainer = document.getElementById("containerB");
            emailContainer.appendChild(groupList);
        }

        function directGroup(emails){
            window.location.href = "https://www.henhackshackathon.com/home";
        }
	</script>
</body>
</html>